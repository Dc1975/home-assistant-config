- id: '1683729192248'
  alias: HA Rolladen auf Sommerbetrieb
  description: ""
  trigger:
    - platform: time
      at: input_datetime.idt_ha_covers_close_summer_before
  condition:
    - condition: template
      value_template: >
        {{now().month | string in
        states('input_text.it_ha_covers_close_summer_months')}}
  action:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.ib_ha_covers_up_down_summer_mode_runs
# Wohnzimemrtür
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_wz_door_covers_closed_by_summer_mode') == 'on'
              and states('input_boolean.ib_wz_door_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.wz_covers_up_door
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_wz_door_covers_closed_by_summer_mode                                       
# Wohnzimemrfenster
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_wz_window_covers_closed_by_summer_mode') == 'on'
              and states('input_boolean.ib_wz_window_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.wz_covers_up_window
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_wz_window_covers_closed_by_summer_mode                      
# Dachgeschoss
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_dg_covers_closed_by_summer_mode') == 'on'
              and states('input_boolean.ib_dg_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.dg_covers_up
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_dg_covers_closed_by_summer_mode          
# Ankleidezimmer            
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_sz_az_covers_closed_by_summer_mode') == 'on'}}
              and states('input_boolean.ib_sz_az_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.sz_az_covers_up
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_sz_az_covers_closed_by_summer_mode  
# Schlafzimmer          
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_sz_covers_closed_by_summer_mode') == 'on'}}
              and states('input_boolean.ib_sz_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.sz_covers_up
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_sz_covers_closed_by_summer_mode  
# Gästezimmer            
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_gz_covers_closed_by_summer_mode') == 'on'}}
              and states('input_boolean.ib_gz_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.gz_covers_up
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_gz_covers_closed_by_summer_mode              
# Küche       
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_ku_covers_closed_by_summer_mode') == 'on'}}
              and states('input_boolean.ib_ku_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.ku_covers_up
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_ku_covers_closed_by_summer_mode                          
# Badezimmer         
    - if:
        - condition: template
          value_template: >
            {{ states('input_boolean.ib_bz_covers_closed_by_summer_mode') == 'on'}}
              and states('input_boolean.ib_bz_cover_used_in_automations') == 'on' }}
      then:    
        - service: script.turn_on
          target:
            entity_id: script.bz_covers_up
          data: {}
        - service: input_boolean.turn_off
          data: {}
          target:
            entity_id: input_boolean.ib_bz_covers_closed_by_summer_mode
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.ib_ha_covers_up_down_summer_mode_runs            
  mode: single
